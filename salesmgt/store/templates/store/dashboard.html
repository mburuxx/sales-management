{% extends "store/base.html" %}
{% load static %}
{% block title %}Dashboard{% endblock title %}

{% block stylesheets %}
<style>
    .dashboard-card-link {
        text-decoration: none;
    }

    .icon-shape {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        font-size: 1.25rem;
        color: #fff;
    }

    .bg-custom-products {
        background-color: var(--sidebar-active-bg);
    }

    .bg-custom-staff {
        background-color: var(--primary-color);
    }

    .bg-custom-deliveries {
        background-color: #f59e0b;
    }

    .bg-custom-sales {
        background-color: #10b981;
    }

    .card {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
    }
    
    .badge-soft-success {
        background-color: rgba(16, 185, 129, 0.1);
        color: #10b981 !important;
    }
    .badge-soft-danger {
        background-color: rgba(173, 29, 29, 0.1);
        color: #dc2626 !important;
    }
    
    .text-muted {
        color: #6b7280 !important;
    }
    .font-semibold {
        font-weight: 600;
    }
    .font-bold {
        font-weight: 700;
    }
</style>
{% endblock stylesheets %}

{% block content %}
<div class="d-flex flex-column h-100">
    <div class="flex-grow-1">
        <main class="py-4">
            <div class="container-fluid">
                
                {# Card Row #}
                <div class="row g-4 mb-6">
                    
                    <div class="col-xl-3 col-sm-6 col-12">
                        <a href="{% url 'product-list' %}" class="dashboard-card-link">
                            <div class="card border-0">
                                <div class="card-body p-4">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <span class="h6 font-semibold text-muted text-sm d-block mb-2">Products</span>
                                            <span class="h3 font-bold mb-0">{{total_items}}</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon-shape bg-custom-products">
                                                <i class="fa fa-clipboard-list"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-sm">
                                        <span class="badge badge-pill badge-soft-success me-2">
                                            <i class="fa fa-arrow-up me-1"></i>13%
                                        </span>
                                        <span class="text-nowrap text-xs text-muted">Since last month</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="col-xl-3 col-sm-6 col-12">
                        <a href="{% url 'profile_list' %}" class="dashboard-card-link">
                            <div class="card border-0">
                                <div class="card-body p-4">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <span class="h6 font-semibold text-muted text-sm d-block mb-2">Staff</span>
                                            <span class="h3 font-bold mb-0">{{profiles_count}}</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon-shape bg-custom-staff">
                                                <i class="fa fa-users"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-sm">
                                        <span class="badge badge-pill badge-soft-success me-2">
                                            <i class="fa fa-arrow-up me-1"></i>30%
                                        </span>
                                        <span class="text-nowrap text-xs text-muted">Since last month</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="col-xl-3 col-sm-6 col-12">
                        <a href="{% url 'deliveries' %}" class="dashboard-card-link">
                            <div class="card border-0">
                                <div class="card-body p-4">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <span class="h6 font-semibold text-muted text-sm d-block mb-2">Deliveries</span>
                                            <span class="h3 font-bold mb-0">{{delivery.count}}</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon-shape bg-custom-deliveries">
                                                <i class="fa fa-truck"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-sm">
                                        <span class="badge badge-pill badge-soft-danger me-2">
                                            <i class="fa fa-arrow-down me-1"></i>-5%
                                        </span>
                                        <span class="text-nowrap text-xs text-muted">Since last month</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    
                    <div class="col-xl-3 col-sm-6 col-12">
                        <a href="{% url 'sales-list' %}" class="dashboard-card-link">
                            <div class="card border-0">
                                <div class="card-body p-4">
                                    <div class="row align-items-center">
                                        <div class="col">
                                            <span class="h6 font-semibold text-muted text-sm d-block mb-2">Sales</span>
                                            <span class="h3 font-bold mb-0">{{sales.count}}</span>
                                        </div>
                                        <div class="col-auto">
                                            <div class="icon-shape bg-custom-sales">
                                                <i class="fa fa-shopping-cart"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3 text-sm">
                                        <span class="badge badge-pill badge-soft-success me-2">
                                            <i class="fa fa-arrow-up me-1"></i>10%
                                        </span>
                                        <span class="text-nowrap text-xs text-muted">Since last month</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                
                {# Correct inclusion of the chart snippet #}
                {% include 'store/charts.html' %} 
                
            </div>
        </main>
    </div>
</div>
{% endblock content %}